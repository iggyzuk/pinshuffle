<!DOCTYPE html>
<html lang="en">

<head>
  <title>Pinshuffle ‚Äì Pinterest Board Randomizer</title>
  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, user-scalable=no">
  <meta name="theme-color" content="#111111" />
  <meta name="description" content="Pinterest Board Randomizer">
  <meta name="keywords" content="Pinterest, Shuffle, Random, Pin, Creativity, Pinshuffle">
  <meta name="author" content="Iggy Zuk">

  <link rel="apple-touch-icon" sizes="180x180" href="static/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="static/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="static/images/favicon/favicon-16x16.png">
  <link rel="manifest" href="static/images/favicon/site.webmanifest">
  {{/* <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous"> */}}
  <link rel="stylesheet" id="theme" href="static/styles/sketchy.min.css">
  {{/* <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"> */}}
  <link rel="stylesheet" href="static/styles/main.css">

  <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/packery/2.1.2/packery.pkgd.min.js"></script>
  <script src="static/scripts/app.js"></script>
  <script src="static/scripts/cookies.js"></script>
  <script src="static/scripts/shuffle.js"></script>
</head>

<body>

   <!-- Image Popup Modal -->
    <div class="modal fade" id="img-popup" data-backdrop="static" data-keyboard="false">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

          <!-- Image Popup Header -->
          <div class="row justify-content-end">

            <!-- Open Pin -->
            <div class="col-4 d-flex justify-content-center">
              <a href="#open-pin-link" target="_blank" id="img-popup-pin-name" class="btn btn-xs btn-outline-primary m-1 w-100 font-weight-bold" role="button">Open Pin</a>
            </div>

            <!-- Board Badge -->
            <div class="col-4 d-flex justify-content-end">
              <div class="badge badge-secondary m-2 align-self-center">
                <span id="img-popup-board-name" href="#" target="_blank">Board</span>
              </div>
            </div>

          </div>

          <!-- Zoomed in Image -->
          <div class="px-1 pb-1">
            <img id="img-popup-src" class="rounded" src="#"/>
          </div>

        </div>
      </div>
    </div>

  <div class="container-fluid p-1">

    {{ if not .Authenticated }}

    <!-- Intro Modal -->
    <div class="modal fade" id="intro-modal" data-backdrop="static" data-keyboard="false">
      <div class="modal-dialog">
        <div class="modal-content">

          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">‚ô¶Ô∏è Shuffle Your Pinterest Boards</h4>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            <p class="lead"><b>Pinshuffle</b> loads pins from <a href="https://pinterest.com/" target="_blank">Pinterest</a> boards and shuffles them around. It does not modify the original boards in any way. The main purpose of the app is to get re-inspired by older pins, and to get creative with visual associations.</p>
            <p>To start, please <button onclick='window.location.href = "{{ .OAuthURL }}"' class="btn btn-primary m-1" type="submit">Sign in</button> with <a href="https://pinterest.com/" target="_blank">Pinterest</a>.</p>
            <p class="small">By continuing you agree for Pinshuffle to store cookies for access token and the selected theme.</p>
          </div>

        </div>
      </div>
    </div>

    {{ end }}

    {{ if .Error }}
    <div class="alert alert-danger alert-dismissible fade show">
      <button type="button" class="close" data-bs-dismiss="alert">&times;</button>
      {{ .Error }}
    </div>
    {{ end }}
    {{ if .Message }}
    <div class="alert alert-primary alert-dismissible fade show">
      <button type="button" class="close" data-bs-dismiss="alert">&times;</button>
      {{ .Message }}
    </div>
    {{ end }}

    <div class="grid">
      {{ range .Pins }}
      <div class="grid-item" data-bs-toggle="tooltip" title="{{ .Board.Name }}">
        <img class="grid-image" style="background-color:{{.Color}};" src="{{ .ImageURL }}" alt="{{ .AltText }}" pin-name="{{ .Name }}" pin-url="https://www.pinterest.co.uk/pin/{{ .Id }}" board-name="{{ .Board.Name }}"/>
        {{/* <span class="pin-badge text-truncate badge border border-primary text-primary">{{ .Board.Name }}</span> */}}
      </div>
      {{ end }}
    </div>

    <!-- Bottom buttons -->
    <div class="fixed-bottom">
      <div class="float-right">

        <!-- THE SHUFFLE BUTTON -->
        <div class="row m-1">
            <button id="shuffle-button" type="button" class="btn btn-danger col-sm">üé≤ Shuffle <span class="badge badge-light badge-pill">{{ len .Pins }}</span></button>
        </div>

        <!-- Boards & Settings -->
        <div class="row m-1">
          <button type="button" class="btn btn-secondary btn" data-bs-toggle="modal" data-bs-target="#boards-modal">üìí Boards <span class="badge badge-light badge-pill">{{ len .Boards }}</span></button>
          <button type="button" class="btn btn-outline-primary ml-1" data-bs-toggle="modal" data-bs-target="#settings-modal">‚öôÔ∏è</button>
        </div>

      </div>
    </div>
  </div>

  {{/* <p>The Name of the Pin!</p> */}}

  <form action="/" method="get">

  <!-- Boards Modal -->
  <div class="modal fade" id="boards-modal">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
      <div class="modal-content">

        <!-- Board Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">üìí Boards <span class="badge badge-secondary badge-pill">{{ len .Boards }}</span></h4>
          <button type="button" class="close" data-bs-dismiss="modal">&times;</button>
        </div>

        <!-- Board Modal Body -->
        <div class="modal-body">

          <div class="content">

            <!-- GRID -->

            {{/* <label class="btn btn-outline-secondary" for="btn-check-2-outlined">
              <input type="checkbox" class="btn-check" id="btn-check-2-outlined" checked autocomplete="off">
              Checked
            </label>

            <input type="checkbox" class="btn-check" id="btn-check" autocomplete="off" />
            <label class="btn btn-primary" for="btn-check">Checkbox button</label> */}}

<div class="form-check form-switch">
      <input class="form-check-input" type="checkbox" id="mySwitch" name="darkmode" value="yes" checked>
      <label class="form-check-label" for="mySwitch">Dark Mode</label>
    </div>

            <div class="container">
              <div class="row justify-content-center">
                <div class="col">

                      <div class="row">

                        {{ $selectedBoards := .UrlQuery.Boards }}
                        {{ $sortedBoards := SortBoards .Boards }}

                        {{ range $sortedBoards }}

                        {{ $checked := IsBoardSelected $selectedBoards .Id }}

{{/* data-bs-toggle="buttons" */}}

                        <div class="col">
                          <div class="col text-nowrap p-1 button" data-bs-toggle="buttons">
                            <input type="checkbox" class="btn-check" name="b" value="{{ .Id }}" id="{{ .Id }}" autocomplete="off">
                            <label class="btn btn-outline-primary {{ if $checked }} active {{ end }}" for="{{ .Id }}"> {{ .Name }}</label>
                          </div>
                        </div>

                        {{ end }}

                      </div>

                </div>
              </div>
            </div>

          </div>

        </div>

        <!-- Board Modal Footer -->
        <div class="p-3">

          <div class="d-flex justify-content-between">          

              <!-- Max Input -->
              <div class="d-flex justify-content-between pr-2">
                <label class="align-self-center pr-2" for="max">Max</label>
                <input
                  id="max"
                  class="form-control align-self-center"
                  type="number"
                  name="max"
                  min="0"
                  max="10000"
                  type="text"
                  placeholder="Total Pins"
                  value={{.UrlQuery.Max}} />
              </div>

              <div class="d-flex justify-content-between pr-2">
                <label class="align-self-center pr-2" for="resolution">Resolution </label>

                {{/* <!-- Default dropup button -->
                <div class="btn-group dropup">
                  <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Dropup
                  </button>
                  <div class="dropdown-menu">
                    <button class="dropdown-item" type="button">Small</button>
                    <button class="dropdown-item" type="button">Medium</button>
                    <button class="dropdown-item" type="button">Large</button>
                    <button class="dropdown-item" type="button">Huge</button>
                    <button class="dropdown-item" type="button">Original</button>
                  </div>
                </div> */}}

                <!-- Resolution Input -->
                <select class="form-control align-self-center" id="res" name="res">
                  <option id="0" value="0" {{ if eq .UrlQuery.ImageResolution 0 }} selected="selected" {{ end }}>Small</option>
                  <option id="1" value="1" {{ if eq .UrlQuery.ImageResolution 1 }} selected="selected" {{ end }}>Medium</option>
                  <option id="2" value="2" {{ if eq .UrlQuery.ImageResolution 2 }} selected="selected" {{ end }}>Large</option>
                  <option id="3" value="3" {{ if eq .UrlQuery.ImageResolution 3 }} selected="selected" {{ end }}>Huge</option>
                  <option id="4" value="4" {{ if eq .UrlQuery.ImageResolution 4 }} selected="selected" {{ end }}>Original</option>
                </select>
              </div>

            <!-- Submit the form -->
            <div class="w-25">
              <button type="submit" class="btn btn-success align-self-center w-100">Go!</button>
            </div>

          </div>

        </div>

      </div>
    </div>
  </div>

  </form>

  <!-- Settings Modal -->
  <div class="modal fade" id="settings-modal">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">

        <!-- Modal header -->
        <div class="modal-header">
          <h4 class="modal-title">‚öôÔ∏è Settings</h4>
          <button type="button" class="close" data-bs-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">

          <!-- Don't show user if the length of the username is zero -->
          {{ if gt (len .User.Name) 0 }}

          <!-- User profile -->
          <div class="d-flex justify-content-center">
            <span class="p-2">
              <img src="{{ .User.IconURL }}" class="rounded-circle mx-2 border border-secondary" style="width: 32px; height:32px;"/>
              <a href="https://pinterest.com/{{ .User.Name }}" target="_blank"><b>{{ .User.Name }}</b></a>
            </span>
            <button id="log-out-button" class="p-2 btn btn-danger m-1" type="button" > üëû Logout</button>
          </div>

          <hr/>

          {{ end }}
        
          <div class="d-flex justify-content-between">
              {{/* <button data-theme="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.3.1/flatly/bootstrap.min.css" type="button" class="btn btn-light m-1">üåù Light</button> */}}
              {{/* <button data-theme="https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/slate/bootstrap.min.css" type="button" class="btn btn-secondary m-1"> üé¨ Slate</button> */}}
              <button type="button" class="theme-button btn btn-light m-1" data-theme="static/styles/bootstrap4-charming.min.css" > ‚ú® Charming</button>
              <button type="button" class="theme-button btn btn-dark m-1" data-theme="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.3.1/darkly/bootstrap.min.css" >üåö Darkly</button>
              <button type="button" class="theme-button btn btn-warning m-1" data-theme="static/styles/sketchy.min.css" > ‚úèÔ∏è Sketchy</button>
              <button type="button" class="theme-button btn btn-info m-1" data-theme="static/styles/bootstrap4-neon-glow.min.css" > ‚óà Neon</button>
          </div>

          <hr class="my-4">

          <div class="content">
            <p><b>Pinshuffle</b> loads pins from <a href="https://pinterest.com/" target="_blank">Pinterest</a> boards and shuffles them around. It does not modify the original boards in any way. The main purpose of the app is to get re-inspired by older pins, and to get creative with visual associations.</p>
          </div>

          <div class="content">
            {{/* <dl><h5>üîí Privacy:</h5></dl> */}}
            <p><b>Privacy:</b> Cookies for access token and the selected theme.</p>
          </div>

          <p class="small text-right">Made by <a href="https://twitter.com/IggyZuk/" target="_blank">Iggy Zuk</a></p>
        </div>

      </div>
    </div>
  </div>

</body>

</html>
